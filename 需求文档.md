# 实验室信息管理系统需求文档

## 1. 引言

### 1.1 目的

本文档旨在详细描述实验室信息管理系统的需求。它将作为开发和评估该系统的基础。

### 1.2 范围

该系统将使实验室人员能够有效地管理实验室内的设备（device）和材料（parts），包括存储、使用状态、维护、借出和归还等。

## 2. 总体描述

### 2.1 功能需求

#### 2.1.1 数据管理

* 设备和材料的信息记录，包括名称、型号等。
* 设备和材料的库存记录，包括序列号、数量等。
* 支持文档和图片的存储，如用户手册、测试报告。
* 支持设备和材料信息的统一展示和查询。
* 支持设备和材料库存的统一展示和查询。

#### 2.1.2 批量导入和导出

* 支持Excel、CSV格式的批量导入。
* 数据导出功能：支持导出数据库表结构、数据、相关联的文档和图片。

#### 2.1.3 借出和归还

* 记录借出和归还的日期、负责人。
* 页面提醒长期未归还的条目。

#### 2.1.4 库存管理

* 阈值设置及低于阈值时的提醒功能。

#### 2.1.5 检索和统计

* 支持全文检索和高级搜索功能。
* 提供统计报告，包括使用频率和维护记录。

#### 2.1.6 安全性和权限

* 不同级别的用户群组：管理员、普通用户、访客。
* 详细的操作日志记录和操作回退功能。

### 2.2 用户界面

* 清晰、简洁的布局，专业配色方案。
* 设备和材料以列表视图展示，详情通过超链接访问。
* 响应式设计以适应不同设备。

### 2.3 性能需求

* 适应小团队使用，保证系统稳定性和响应速度。

### 2.4 设备和材料状态分类

* 设备和材料的状态管理，包括闲置、使用中、故障、维修中、被借出等。

### 2.5 设备和材料的维护与保养记录

* 记录维护日期、活动、负责人和相关文件。
* 设置定期维护提醒功能。

### 2.6 自定义报告和数据分析

* 支持自定义报告的生成，包括选择特定的数据字段和时间范围。
* 提供数据分析功能，如趋势分析和使用频率分析。

### 2.7 系统维护和升级

* 根据需求变化进行不定期维护和升级。

### 2.8 系统集成与扩展

* 未来可考虑与其他系统集成，保留接口以支持扩展。

### 2.9 备份和灾难恢复

* 每周备份策略，云备份解决方案。
* 灾难恢复计划确保数据和系统快速恢复。

## 3. 详细功能需求

### 3.1 数据管理

#### 3.1.1 数据记录

* **资产类别记录**：
  * 必须的字段：名称。
  * 其他字段：描述。
* **设备信息记录** :
  * 必须的字段：名称、型号。
  * 每个型号共有的信息：资产类别、官网页面超链接、信息备注、文档、图片。
  * 名称和型号的组合唯一。
* **设备库存记录** :
  * 必须的字段：设备信息、序列号、状态（闲置、使用中、借出、故障、维修中）。
  * 其他信息：购买日期、存放位置、当前位置、负责人、自定义标签、库存备注、文档、图片。
  * 名称、型号、序列号的组合唯一。
* **材料信息记录** :
  * 必须的字段：名称、型号。
  * 每个型号共有的信息：资产类别、官网页面超链接、信息备注、文档、图片。
  * 名称和型号的组合唯一。
* **材料库存记录** :
  * 必须的字段：材料信息、状态（如可用、借出、低库存等）、每种状态的材料数量。
  * 其他信息：批次、购买日期、存放位置、当前位置、负责人、自定义标签、库存备注、文档、图片。
* 说明：**id全部使用UUID**。
* 说明：设备和材料可以在没有库存的情况下存在信息记录，方便用户查阅信息。
* 说明：**文档和图片采用本地存储，使用URL访问，每条记录的文档和图片都可能有多个文件，数据库中用JSON存储文件链接**。

#### 3.1.2 新增数据

* **新增资产类别记录**：
  * 必填字段：名称。
* **新增设备信息记录**：
  * 必填字段：名称、型号。
  * 选填字段：资产类别id、官网页面超链接、信息备注。
  * 可选上传：文档、图片。
* **存在对应设备信息时，新增设备库存记录** :
  * 必填字段：设备id、序列号、状态（默认为闲置）。
  * 选填字段：购买日期、存放位置、当前位置、负责人、自定义标签、库存备注。
  * 可选上传：文档、图片。
* **不存在对应设备信息时，新增设备库存记录** :
  * 设备信息记录必填字段：名称、型号。
  * 设备信息记录选填字段：资产类别id、官网页面超链接、信息备注。
  * 设备信息记录可选上传：文档、图片。
  * 设备库存记录必填字段：序列号、状态（默认为闲置）。
  * 设备库存记录选填字段：购买日期、存放位置、当前位置、负责人、自定义标签、库存备注。
  * 设备库存记录可选上传：文档、图片。
  * 说明：在新增设备库存记录前先新增设备信息记录，设备库存记录的设备id使用新增设备信息记录的id。
  * 说明：负责人必须是用户。
* **新增材料信息记录**：
  * 必填字段：名称、型号。
  * 选填字段：资产类别id、官网页面超链接、信息备注。
  * 可选上传：文档、图片。
* **存在对应材料信息时，新增材料库存记录** :
  * 必填字段：材料id、状态（默认为闲置）、数量。
  * 选填字段：批次、购买日期、存放位置、当前位置、负责人、自定义标签、库存备注。
  * 可选上传：文档、图片。
* **不存在对应材料信息时，新增材料库存记录** :
  * 材料信息记录必填字段：名称、型号。
  * 材料信息记录选填字段：资产类别id、官网页面超链接、信息备注。
  * 材料信息记录可选上传：文档、图片。
  * 材料库存记录必填字段：序列号、状态（默认为闲置）。
  * 材料库存记录选填字段：购买日期、存放位置、当前位置、负责人、自定义标签、库存备注。
  * 材料库存记录可选上传：文档、图片。
  * 说明：在新增材料库存记录前先新增材料信息记录，材料库存记录的材料id使用新增材料信息记录的id。
* 说明：**在新增设备或材料的库存记录时，向用户展示信息表中的名称和型号，如果存在对应的信息记录，用户选择后查询到相应id作为库存记录的必填字段。**

### 3.2 批量导入和导出

* **批量导入** :
  * 界面友好的批量导入功能，支持用户上传文件并在系统中预览。
  * 错误检测和提示，如格式错误或数据冲突。
* **数据导出** :
  * 允许用户选择特定数据进行导出。
  * 导出格式包括但不限于Excel、CSV和PDF。

### 3.3 借出和归还记录

* **借出记录** :
  * 必填字段：设备或材料的库存记录id、借用人姓名、借用人联系方式、借出日期（默认为系统时间）。
  * 选填字段：预计归还日期、归还日期。
  * 系统自动更改设备或材料的状态为“借出”。
* **归还处理** :
  * 修改借出记录：填写归还日期（默认为系统时间）。
  * 系统自动更新状态为“可用”或“闲置”。

### 3.4 库存管理

* **阈值设置** :
  * 允许管理员为每种材料设置最低库存阈值。
  * 当库存低于阈值时，系统提供明显的提醒。

### 3.5 检索和统计

* **高级检索** :
  * 支持基于多个条件的高级检索，如按名称、类别、状态等。
  * 快速定位所需的设备或材料信息。
* **统计报告** :
  * 提供设备和材料的使用频率、维护周期等统计信息。
  * 数据可视化展示，如图表和图形。

### 3.6 安全性和权限

#### 3.6.1 用户账号

* **用户群组**：
  * 必须的字段：群组名。
  * 可选的字段：描述。
  * 说明：默认群组为管理员、普通用户、访客。
* **用户账号记录：**
  * 必须的字段：用户名、密码、群组id。
  * 可选的字段：邮箱、创建时间、最近登录时间。
  * 说明：密码以哈希存储。
  * 说明：创建时间、最近登录时间由系统自动记录，以时间戳形式存储。

#### 3.6.2 操作日志

* 系统自动记录所有用户的操作历史，包括时间、操作类型、操作内容和操作者。

### 3.7 设备和材料状态分类

* **状态定义** :
  * 明确定义不同状态，如“闲置”、“使用中”、“故障”、“维修中”、“借出”等。
  * 规定状态之间的转换流程和条件。

### 3.8 设备和材料的维护与保养

* **维护记录** :
  * 记录每次维护的日期、内容和负责人。
  * 关联相应的维护文档和成本记录。
* **维护提醒** :
  * 根据设备的使用情况和厂家推荐，设置定期维护提醒。

### 3.10 用户界面和交互

* **响应式设计** :
  * 确保界面在不同设备（如台式电脑、平板电脑、智能手机）上均有良好展现。
  * 界面元素适应不同屏幕尺寸，保持用户操作的直观性和便捷性。
* **导航和布局** :
  * 清晰的导航结构，方便用户快速找到所需功能。
  * 重要信息（如警告、提醒）显著展示。

### 3.11 系统集成与扩展

* **API和接口** :
  * 设计灵活的API，便于未来与其他系统（如财务系统、库存管理系统）集成。
  * 预留接口以支持未来功能扩展和技术升级。

### 3.12 报告和文档

* **系统文档** :
  * 提供系统使用手册，详细描述功能和操作步骤。
  * 文档应包括常见问题解答和故障排除指南。
* **开发文档** :
  * 编写开发文档，记录系统架构、代码结构和开发规范。
  * 文档应便于新开发人员快速理解和参与项目。

### 3.13 备份和灾难恢复

* **备份策略** :
  * 明确备份的数据范围，包括数据库、文档和其他重要数据。
  * 定期检查备份的完整性和恢复能力。
* **灾难恢复演练** :
  * 定期进行灾难恢复演练，确保恢复流程的有效性和团队的熟练度。

### 3.14 系统性能和可靠性

* **性能要求** :
  * 系统应能够快速响应用户请求，尤其是数据检索和报告生成。
  * 处理大量数据时，系统应保持稳定，避免长时间的延迟或崩溃。
* **可靠性** :
  * 系统应具备高可靠性，减少故障和意外中断。
  * 应对常见故障提供快速恢复能力。

### 3.15 维护和升级

* **维护计划** :
  * 系统将根据需求变化进行不定期的维护，以确保其稳定和高效运行。
  * 维护内容可能包括系统优化、功能更新和安全性提升。
* **升级策略** :
  * 系统升级将根据实际需求和技术进步灵活安排。
  * 升级过程中，将尽量减少对现有用户操作的影响，并提前进行通知。

### 3.16 用户反馈和支持

* **用户反馈** :
  * 目前不设置专门的用户反馈机制，但未来可能根据需要加入此功能。
  * 初始阶段，用户可通过电子邮件或直接联系提供反馈和建议。
* **技术支持** :
  * 在初始阶段，不提供系统范围内的正式用户支持和培训。
  * 未来可根据用户需求和系统发展考虑增加技术支持服务。

### 3.17 数据安全和隐私

* **数据保护** :
  * 实施必要的数据加密和保护措施，确保所有存储和传输的数据安全，尤其是敏感信息。
  * 设置访问控制，确保只有授权用户可以访问敏感和关键数据。

### 3.18 灾难恢复和业务连续性

* **灾难恢复计划** :
  * 设计灾难恢复策略，以应对可能的系统故障或数据丢失，包括定期的数据备份和恢复测试。
  * 确保关键业务流程的快速恢复能力，以减少任何潜在的运营中断。

### 3.19 系统监控和报告

* **性能监控** :
  * 实施系统性能监控，以确保高效运行，并及时发现及响应任何性能问题。
  * 定期生成系统运行报告，包括关键性能指标和系统健康状况。
* **日志和审计** :
  * 系统应记录详细的操作日志，便于问题追踪和安全审计。
  * 定期审查系统日志，确保系统安全和有效运行。

### 3.20 用户培训和支持

* 虽然当前不需要提供正式的用户培训和支持，但系统应设计得直观易用，以确保用户能够快速上手。
* 提供在线帮助文档，包括常见问题解答和操作指南，帮助用户解决基本问题。

### 3.21 系统扩展性

* 系统应设计为可扩展的，能够适应未来可能的需求变更和新功能的添加。
* 保留接口和模块化设计，便于未来集成新的技术或第三方服务。

### 3.22 质量保证和测试

* 实施全面的质量保证流程，包括单元测试、集成测试和系统测试，确保系统的可靠性和性能。
* 定期进行性能评估和安全漏洞扫描，以确保系统的持续稳定性和安全性。

## 技术选型

* 后端：使用Rust和Actix-web框架，通过sqlx与数据库交互。
* 数据库：使用PostgreSQL。
* 前端：使用React框架。
